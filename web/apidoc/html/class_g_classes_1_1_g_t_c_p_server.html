<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GClasses: GClasses::GTCPServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GClasses</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_g_classes_1_1_g_t_c_p_server.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>GClasses::GTCPServer Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="GClasses::GTCPServer" -->
<p>This class is an abstraction of a TCP server, which maintains a set of socket connections.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;GSocket.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for GClasses::GTCPServer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_g_classes_1_1_g_t_c_p_server.png" usemap="#GClasses::GTCPServer_map" alt=""/>
  <map id="GClasses::GTCPServer_map" name="GClasses::GTCPServer_map">
<area href="class_g_classes_1_1_g_package_server.html" alt="GClasses::GPackageServer" shape="rect" coords="0,56,168,80"/>
</map>
 </div></div>

<p><a href="class_g_classes_1_1_g_t_c_p_server-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a7501d1fba313261ec313270c3d850d7a">GTCPServer</a> (unsigned short port)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a4224d2e840e19f2f265d2e9c9e7db5a5">~GTCPServer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a7a192a4440a2d074bc2198ce82300d73">send</a> (const char *buf, size_t len, <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *pConn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send some data to the specified client. Throws an exception if the send fails for any reason (including common reasons, such as if the client has closed the connection), so it is generally a good idea to send within a try/catch block.  <a href="#a7a192a4440a2d074bc2198ce82300d73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a47baf96a5554c7fae8be57055e6b9b80">receive</a> (char *buf, size_t len, <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> **pOutConn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method receives any data that is ready to be received. It returns the number of bytes received. It immediately returns 0 if nothing is ready to be recevied. The value at pOutConn will be set to indicate which client it received the data from.  <a href="#a47baf96a5554c7fae8be57055e6b9b80"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a45c9f5c24c660d5391347c76779cefcd">disconnect</a> (<a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *pConn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect from the specified client.  <a href="#a45c9f5c24c660d5391347c76779cefcd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">in_addr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#aa616bf8baccf80114715290cecad1421">ipAddr</a> (<a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *pConn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the client's IP address for the specified connection.  <a href="#aa616bf8baccf80114715290cecad1421"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a64a3a8f33ae83536a56ba2c3a7f2d44c">hostName</a> (char *buf, size_t len)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the name of this host.  <a href="#a64a3a8f33ae83536a56ba2c3a7f2d44c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a1c6d88f34f86b916ff15e801012acfa4">makeConnection</a> (SOCKET s)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called just before a new connection is accepted. It returns a pointer to a new <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html" title="This class is used by GTCPServer to represent a connection with one of the clients. (If you want to associate some additional objects with each connection, you can inherrit from this class, and overload GTCPServer::makeConnection to return your own custom object.)">GTCPConnection</a> object to associate with this connection. (The connection, however, isn't yet fully established, so it might cause an error if you send something to the client in an overload of this method.)  <a href="#a1c6d88f34f86b916ff15e801012acfa4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#ad112359fb5d269696d3ac0ebd03ef1cb">onDisconnect</a> (<a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *pConn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called when a connection is first known to have disconnected.  <a href="#ad112359fb5d269696d3ac0ebd03ef1cb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#abe422eaa360061e5ef78509bd311fc86">onReceiveBadData</a> (const char *message)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called when a client sends some bad data.  <a href="#abe422eaa360061e5ef78509bd311fc86"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a6eb873b5b8f446a7a3c990ed9b426ae7">checkForNewConnections</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Accept any new incoming connections.  <a href="#a6eb873b5b8f446a7a3c990ed9b426ae7"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SOCKET&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a745441fae2cddb360e58081acb7bed6f">m_sock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a1e0e830fff9c84c20257ff9990be0271">m_socks</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class is an abstraction of a TCP server, which maintains a set of socket connections. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7501d1fba313261ec313270c3d850d7a"></a><!-- doxytag: member="GClasses::GTCPServer::GTCPServer" ref="a7501d1fba313261ec313270c3d850d7a" args="(unsigned short port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GClasses::GTCPServer::GTCPServer </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4224d2e840e19f2f265d2e9c9e7db5a5"></a><!-- doxytag: member="GClasses::GTCPServer::~GTCPServer" ref="a4224d2e840e19f2f265d2e9c9e7db5a5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual GClasses::GTCPServer::~GTCPServer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6eb873b5b8f446a7a3c990ed9b426ae7"></a><!-- doxytag: member="GClasses::GTCPServer::checkForNewConnections" ref="a6eb873b5b8f446a7a3c990ed9b426ae7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GTCPServer::checkForNewConnections </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Accept any new incoming connections. </p>

</div>
</div>
<a class="anchor" id="a45c9f5c24c660d5391347c76779cefcd"></a><!-- doxytag: member="GClasses::GTCPServer::disconnect" ref="a45c9f5c24c660d5391347c76779cefcd" args="(GTCPConnection *pConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GTCPServer::disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *&#160;</td>
          <td class="paramname"><em>pConn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disconnect from the specified client. </p>

</div>
</div>
<a class="anchor" id="a64a3a8f33ae83536a56ba2c3a7f2d44c"></a><!-- doxytag: member="GClasses::GTCPServer::hostName" ref="a64a3a8f33ae83536a56ba2c3a7f2d44c" args="(char *buf, size_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void GClasses::GTCPServer::hostName </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Obtains the name of this host. </p>

</div>
</div>
<a class="anchor" id="aa616bf8baccf80114715290cecad1421"></a><!-- doxytag: member="GClasses::GTCPServer::ipAddr" ref="aa616bf8baccf80114715290cecad1421" args="(GTCPConnection *pConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">in_addr GClasses::GTCPServer::ipAddr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *&#160;</td>
          <td class="paramname"><em>pConn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the client's IP address for the specified connection. </p>

</div>
</div>
<a class="anchor" id="a1c6d88f34f86b916ff15e801012acfa4"></a><!-- doxytag: member="GClasses::GTCPServer::makeConnection" ref="a1c6d88f34f86b916ff15e801012acfa4" args="(SOCKET s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a>* GClasses::GTCPServer::makeConnection </td>
          <td>(</td>
          <td class="paramtype">SOCKET&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is called just before a new connection is accepted. It returns a pointer to a new <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html" title="This class is used by GTCPServer to represent a connection with one of the clients. (If you want to associate some additional objects with each connection, you can inherrit from this class, and overload GTCPServer::makeConnection to return your own custom object.)">GTCPConnection</a> object to associate with this connection. (The connection, however, isn't yet fully established, so it might cause an error if you send something to the client in an overload of this method.) </p>

<p>Reimplemented in <a class="el" href="class_g_classes_1_1_g_package_server.html#a4299ed0f847c561ad70181cff994a136">GClasses::GPackageServer</a>.</p>

</div>
</div>
<a class="anchor" id="ad112359fb5d269696d3ac0ebd03ef1cb"></a><!-- doxytag: member="GClasses::GTCPServer::onDisconnect" ref="ad112359fb5d269696d3ac0ebd03ef1cb" args="(GTCPConnection *pConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void GClasses::GTCPServer::onDisconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *&#160;</td>
          <td class="paramname"><em>pConn</em></td><td>)</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is called when a connection is first known to have disconnected. </p>

</div>
</div>
<a class="anchor" id="abe422eaa360061e5ef78509bd311fc86"></a><!-- doxytag: member="GClasses::GTCPServer::onReceiveBadData" ref="abe422eaa360061e5ef78509bd311fc86" args="(const char *message)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void GClasses::GTCPServer::onReceiveBadData </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is called when a client sends some bad data. </p>

</div>
</div>
<a class="anchor" id="a47baf96a5554c7fae8be57055e6b9b80"></a><!-- doxytag: member="GClasses::GTCPServer::receive" ref="a47baf96a5554c7fae8be57055e6b9b80" args="(char *buf, size_t len, GTCPConnection **pOutConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t GClasses::GTCPServer::receive </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> **&#160;</td>
          <td class="paramname"><em>pOutConn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method receives any data that is ready to be received. It returns the number of bytes received. It immediately returns 0 if nothing is ready to be recevied. The value at pOutConn will be set to indicate which client it received the data from. </p>

</div>
</div>
<a class="anchor" id="a7a192a4440a2d074bc2198ce82300d73"></a><!-- doxytag: member="GClasses::GTCPServer::send" ref="a7a192a4440a2d074bc2198ce82300d73" args="(const char *buf, size_t len, GTCPConnection *pConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GTCPServer::send </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *&#160;</td>
          <td class="paramname"><em>pConn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send some data to the specified client. Throws an exception if the send fails for any reason (including common reasons, such as if the client has closed the connection), so it is generally a good idea to send within a try/catch block. </p>

<p>Reimplemented in <a class="el" href="class_g_classes_1_1_g_package_server.html#afb0d3f9957fa64444afb7d0d0033b9e7">GClasses::GPackageServer</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a745441fae2cddb360e58081acb7bed6f"></a><!-- doxytag: member="GClasses::GTCPServer::m_sock" ref="a745441fae2cddb360e58081acb7bed6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SOCKET <a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a745441fae2cddb360e58081acb7bed6f">GClasses::GTCPServer::m_sock</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1e0e830fff9c84c20257ff9990be0271"></a><!-- doxytag: member="GClasses::GTCPServer::m_socks" ref="a1e0e830fff9c84c20257ff9990be0271" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a>*&gt; <a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a1e0e830fff9c84c20257ff9990be0271">GClasses::GTCPServer::m_socks</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_g_classes.html">GClasses</a>      </li>
      <li class="navelem"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html">GTCPServer</a>      </li>
      <li class="footer">Generated on Mon Dec 5 2011 14:19:03 for GClasses by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>

</body>
</html>
