<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GClasses: GClasses::GHttpServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GClasses</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_g_classes_1_1_g_http_server.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>GClasses::GHttpServer Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="GClasses::GHttpServer" -->
<p>This class allows you to implement a simple HTTP daemon.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;GHttp.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for GClasses::GHttpServer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_g_classes_1_1_g_http_server.png" usemap="#GClasses::GHttpServer_map" alt=""/>
  <map id="GClasses::GHttpServer_map" name="GClasses::GHttpServer_map">
<area href="class_g_classes_1_1_g_dynamic_page_server.html" alt="GClasses::GDynamicPageServer" shape="rect" coords="0,56,197,80"/>
</map>
 </div></div>

<p><a href="class_g_classes_1_1_g_http_server-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#ab90484fcb267f9a250c779fdbdb87380">GHttpServer</a> (int nPort)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a108c93014a95136fb205a6582cf61627">~GHttpServer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#aedcd950abf4051ff54beac0714fbb6a0">process</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">You should call this method constantly inside the main loop. It returns true if it did anything, and false if it didn't, so if it returns false you may want to sleep for a little while.  <a href="#aedcd950abf4051ff54beac0714fbb6a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a3120d9c627e29d82633116aabd6737bb">setContentType</a> (const char *szContentType)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Specifies the content-type of the response.  <a href="#a3120d9c627e29d82633116aabd6737bb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#ad9076352efd9ca8d4db1749cafd01618">setCookie</a> (const char *szPayload, bool bPersist)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Specifies the set-cookie header to be sent with the response.  <a href="#ad9076352efd9ca8d4db1749cafd01618"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a514d096a813c80e75be6122c1afd449e">setModifiedTime</a> (time_t t)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the date (modified time) to be sent with the file so the client can cache it.  <a href="#a514d096a813c80e75be6122c1afd449e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html">GTCPServer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a153fd09ddc74e64b1cc49dff09069d33">socket</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a reference to the socket on which this server listens.  <a href="#a153fd09ddc74e64b1cc49dff09069d33"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a51a45bb9b83158d3818252279593b82d">unescapeUrl</a> (char *szOut, const char *szIn, size_t nInLen)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Unescapes a URL. (i.e. replace "%20" with " ", etc.). szOut should point to a buffer at least as big as szIn (including the null terminator). This will stop when it hits the null-terminator in szIn or when nInLen characters have been parsed. So if szIn is null-terminated, you can safely pass in a huge arbitrary value for nInLen.  <a href="#a51a45bb9b83158d3818252279593b82d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#ab1cec52c30089c6c9c8a512e65553c4c">parseFileParam</a> (const char *pParams, size_t nParamsLen, const char **ppFilename, size_t *pFilenameLen, const unsigned char **ppFile, size_t *pFileLen)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a rather hacky method that parses the parameters of a specific upload-file form.  <a href="#ab1cec52c30089c6c9c8a512e65553c4c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a7f8455afb160c4cdeab6196486631d5e">onProcessLine</a> (GHttpConnection *pConn, const char *szLine)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a516a5741617f9a0411550496b9f7cf2c">processPostData</a> (GHttpConnection *pConn, const unsigned char *pData, size_t nDataSize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a854745bef3bee8331be97e96727d4c32">processHeaderLine</a> (GHttpConnection *pConn, const char *szLine)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#ad1994d305e93ae7287b6d59e62e55243">beginRequest</a> (GHttpConnection *pConn, int eType, const char *szIn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a87ac0b6e5872ba5c50b85a9561ff79b8">sendResponse</a> (GHttpConnection *pConn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a91971634ea92522e4f1278c4e213582c">sendNotModifiedResponse</a> (GHttpConnection *pConn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a7a352ef376f1985ea5c0ea4bfa539609">onReceiveFullPostRequest</a> (GHttpConnection *pConn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a556b611a27d629516aa9ce02c7cd0867">setHeaders</a> (const char *szUrl, const char *szParams)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method should set the content type and the date headers, and any other headers deemed necessary.  <a href="#a556b611a27d629516aa9ce02c7cd0867"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a0b99590f047e18224745ac72edf1260e">doGet</a> (const char *szUrl, const char *szParams, size_t nParamsLen, const char *szCookie, std::ostream &amp;response)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The primary purpose of this method is to push a response into pResponse. Typically this method will call SetHeaders.  <a href="#a0b99590f047e18224745ac72edf1260e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a9bbd5380df9c346b3b7b58aede94381b">doPost</a> (const char *szUrl, unsigned char *pData, size_t nDataSize, const char *szCookie, std::ostream &amp;response)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method takes ownership of pData. Don't forget to delete it. When the POST is caused by an HTML form, it's common for this method to just call DoGet (passing pData for szParams) and then delete pData. (For convenience, a '\0' is already appended at the end of pData.)  <a href="#a9bbd5380df9c346b3b7b58aede94381b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a1684597ae9a9f21ae19299010d9adf0d">hasBeenModifiedSince</a> (const char *szUrl, const char *szDate)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is called when the client does a conditional GET. It should return true if you wish to re-send the file, and DoGet will be called.  <a href="#a1684597ae9a9f21ae19299010d9adf0d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a88e4c216ea83851e4b4c5410b3416dd9">m_pReceiveBuf</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GHttpServerSocket *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a0a298e0db4ed2187de8aeea9a045c844">m_pSocket</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; GHttpServerBuffer * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#ad0c32f4410372d9db749780f8779efef">m_buffers</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostringstream&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#addf66e5e8bddcf3313182b0d688ceaa8">m_stream</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#ad4133caf5bf610b1eaa47a5e9c969e7e">m_szContentType</a> [64]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a5b72c0105987b22167770e6442eb8fa3">m_szCookie</a> [MAX_COOKIE_SIZE]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a2b04cf4e0523b898f095c2de9c64c098">m_bPersistCookie</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_http_server.html#a3a5cf31017d20c28905126c6e8379782">m_modifiedTime</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class allows you to implement a simple HTTP daemon. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab90484fcb267f9a250c779fdbdb87380"></a><!-- doxytag: member="GClasses::GHttpServer::GHttpServer" ref="ab90484fcb267f9a250c779fdbdb87380" args="(int nPort)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GClasses::GHttpServer::GHttpServer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nPort</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a108c93014a95136fb205a6582cf61627"></a><!-- doxytag: member="GClasses::GHttpServer::~GHttpServer" ref="a108c93014a95136fb205a6582cf61627" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual GClasses::GHttpServer::~GHttpServer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ad1994d305e93ae7287b6d59e62e55243"></a><!-- doxytag: member="GClasses::GHttpServer::beginRequest" ref="ad1994d305e93ae7287b6d59e62e55243" args="(GHttpConnection *pConn, int eType, const char *szIn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GHttpServer::beginRequest </td>
          <td>(</td>
          <td class="paramtype">GHttpConnection *&#160;</td>
          <td class="paramname"><em>pConn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>eType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szIn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0b99590f047e18224745ac72edf1260e"></a><!-- doxytag: member="GClasses::GHttpServer::doGet" ref="a0b99590f047e18224745ac72edf1260e" args="(const char *szUrl, const char *szParams, size_t nParamsLen, const char *szCookie, std::ostream &amp;response)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void GClasses::GHttpServer::doGet </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szParams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nParamsLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szCookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The primary purpose of this method is to push a response into pResponse. Typically this method will call SetHeaders. </p>

<p>Implemented in <a class="el" href="class_g_classes_1_1_g_dynamic_page_server.html#aef439806ea61cf7717276fea48873c4d">GClasses::GDynamicPageServer</a>.</p>

</div>
</div>
<a class="anchor" id="a9bbd5380df9c346b3b7b58aede94381b"></a><!-- doxytag: member="GClasses::GHttpServer::doPost" ref="a9bbd5380df9c346b3b7b58aede94381b" args="(const char *szUrl, unsigned char *pData, size_t nDataSize, const char *szCookie, std::ostream &amp;response)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void GClasses::GHttpServer::doPost </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nDataSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szCookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method takes ownership of pData. Don't forget to delete it. When the POST is caused by an HTML form, it's common for this method to just call DoGet (passing pData for szParams) and then delete pData. (For convenience, a '\0' is already appended at the end of pData.) </p>

<p>Implemented in <a class="el" href="class_g_classes_1_1_g_dynamic_page_server.html#a92f59852e114d947d11c4a2bb9fc3e58">GClasses::GDynamicPageServer</a>.</p>

</div>
</div>
<a class="anchor" id="a1684597ae9a9f21ae19299010d9adf0d"></a><!-- doxytag: member="GClasses::GHttpServer::hasBeenModifiedSince" ref="a1684597ae9a9f21ae19299010d9adf0d" args="(const char *szUrl, const char *szDate)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool GClasses::GHttpServer::hasBeenModifiedSince </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szDate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is called when the client does a conditional GET. It should return true if you wish to re-send the file, and DoGet will be called. </p>

<p>Implemented in <a class="el" href="class_g_classes_1_1_g_dynamic_page_server.html#aff1b46cb82b60ff113ae8834b51cdf47">GClasses::GDynamicPageServer</a>.</p>

</div>
</div>
<a class="anchor" id="a7f8455afb160c4cdeab6196486631d5e"></a><!-- doxytag: member="GClasses::GHttpServer::onProcessLine" ref="a7f8455afb160c4cdeab6196486631d5e" args="(GHttpConnection *pConn, const char *szLine)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void GClasses::GHttpServer::onProcessLine </td>
          <td>(</td>
          <td class="paramtype">GHttpConnection *&#160;</td>
          <td class="paramname"><em>pConn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szLine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7a352ef376f1985ea5c0ea4bfa539609"></a><!-- doxytag: member="GClasses::GHttpServer::onReceiveFullPostRequest" ref="a7a352ef376f1985ea5c0ea4bfa539609" args="(GHttpConnection *pConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GHttpServer::onReceiveFullPostRequest </td>
          <td>(</td>
          <td class="paramtype">GHttpConnection *&#160;</td>
          <td class="paramname"><em>pConn</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab1cec52c30089c6c9c8a512e65553c4c"></a><!-- doxytag: member="GClasses::GHttpServer::parseFileParam" ref="ab1cec52c30089c6c9c8a512e65553c4c" args="(const char *pParams, size_t nParamsLen, const char **ppFilename, size_t *pFilenameLen, const unsigned char **ppFile, size_t *pFileLen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool GClasses::GHttpServer::parseFileParam </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pParams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nParamsLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>ppFilename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>pFilenameLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char **&#160;</td>
          <td class="paramname"><em>ppFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>pFileLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is a rather hacky method that parses the parameters of a specific upload-file form. </p>

</div>
</div>
<a class="anchor" id="aedcd950abf4051ff54beac0714fbb6a0"></a><!-- doxytag: member="GClasses::GHttpServer::process" ref="aedcd950abf4051ff54beac0714fbb6a0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool GClasses::GHttpServer::process </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>You should call this method constantly inside the main loop. It returns true if it did anything, and false if it didn't, so if it returns false you may want to sleep for a little while. </p>

</div>
</div>
<a class="anchor" id="a854745bef3bee8331be97e96727d4c32"></a><!-- doxytag: member="GClasses::GHttpServer::processHeaderLine" ref="a854745bef3bee8331be97e96727d4c32" args="(GHttpConnection *pConn, const char *szLine)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GHttpServer::processHeaderLine </td>
          <td>(</td>
          <td class="paramtype">GHttpConnection *&#160;</td>
          <td class="paramname"><em>pConn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szLine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a516a5741617f9a0411550496b9f7cf2c"></a><!-- doxytag: member="GClasses::GHttpServer::processPostData" ref="a516a5741617f9a0411550496b9f7cf2c" args="(GHttpConnection *pConn, const unsigned char *pData, size_t nDataSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GHttpServer::processPostData </td>
          <td>(</td>
          <td class="paramtype">GHttpConnection *&#160;</td>
          <td class="paramname"><em>pConn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nDataSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a91971634ea92522e4f1278c4e213582c"></a><!-- doxytag: member="GClasses::GHttpServer::sendNotModifiedResponse" ref="a91971634ea92522e4f1278c4e213582c" args="(GHttpConnection *pConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GHttpServer::sendNotModifiedResponse </td>
          <td>(</td>
          <td class="paramtype">GHttpConnection *&#160;</td>
          <td class="paramname"><em>pConn</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a87ac0b6e5872ba5c50b85a9561ff79b8"></a><!-- doxytag: member="GClasses::GHttpServer::sendResponse" ref="a87ac0b6e5872ba5c50b85a9561ff79b8" args="(GHttpConnection *pConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GHttpServer::sendResponse </td>
          <td>(</td>
          <td class="paramtype">GHttpConnection *&#160;</td>
          <td class="paramname"><em>pConn</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3120d9c627e29d82633116aabd6737bb"></a><!-- doxytag: member="GClasses::GHttpServer::setContentType" ref="a3120d9c627e29d82633116aabd6737bb" args="(const char *szContentType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GHttpServer::setContentType </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szContentType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Specifies the content-type of the response. </p>

</div>
</div>
<a class="anchor" id="ad9076352efd9ca8d4db1749cafd01618"></a><!-- doxytag: member="GClasses::GHttpServer::setCookie" ref="ad9076352efd9ca8d4db1749cafd01618" args="(const char *szPayload, bool bPersist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GHttpServer::setCookie </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szPayload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>bPersist</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Specifies the set-cookie header to be sent with the response. </p>

</div>
</div>
<a class="anchor" id="a556b611a27d629516aa9ce02c7cd0867"></a><!-- doxytag: member="GClasses::GHttpServer::setHeaders" ref="a556b611a27d629516aa9ce02c7cd0867" args="(const char *szUrl, const char *szParams)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void GClasses::GHttpServer::setHeaders </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szUrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szParams</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method should set the content type and the date headers, and any other headers deemed necessary. </p>

<p>Implemented in <a class="el" href="class_g_classes_1_1_g_dynamic_page_server.html#a06c125ae58430efae543ad69eaa1a113">GClasses::GDynamicPageServer</a>.</p>

</div>
</div>
<a class="anchor" id="a514d096a813c80e75be6122c1afd449e"></a><!-- doxytag: member="GClasses::GHttpServer::setModifiedTime" ref="a514d096a813c80e75be6122c1afd449e" args="(time_t t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GHttpServer::setModifiedTime </td>
          <td>(</td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the date (modified time) to be sent with the file so the client can cache it. </p>

</div>
</div>
<a class="anchor" id="a153fd09ddc74e64b1cc49dff09069d33"></a><!-- doxytag: member="GClasses::GHttpServer::socket" ref="a153fd09ddc74e64b1cc49dff09069d33" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_g_classes_1_1_g_t_c_p_server.html">GTCPServer</a>* GClasses::GHttpServer::socket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a reference to the socket on which this server listens. </p>

</div>
</div>
<a class="anchor" id="a51a45bb9b83158d3818252279593b82d"></a><!-- doxytag: member="GClasses::GHttpServer::unescapeUrl" ref="a51a45bb9b83158d3818252279593b82d" args="(char *szOut, const char *szIn, size_t nInLen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void GClasses::GHttpServer::unescapeUrl </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>szOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>szIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nInLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unescapes a URL. (i.e. replace "%20" with " ", etc.). szOut should point to a buffer at least as big as szIn (including the null terminator). This will stop when it hits the null-terminator in szIn or when nInLen characters have been parsed. So if szIn is null-terminated, you can safely pass in a huge arbitrary value for nInLen. </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a2b04cf4e0523b898f095c2de9c64c098"></a><!-- doxytag: member="GClasses::GHttpServer::m_bPersistCookie" ref="a2b04cf4e0523b898f095c2de9c64c098" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_g_classes_1_1_g_http_server.html#a2b04cf4e0523b898f095c2de9c64c098">GClasses::GHttpServer::m_bPersistCookie</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad0c32f4410372d9db749780f8779efef"></a><!-- doxytag: member="GClasses::GHttpServer::m_buffers" ref="ad0c32f4410372d9db749780f8779efef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;GHttpServerBuffer*&gt; <a class="el" href="class_g_classes_1_1_g_http_server.html#ad0c32f4410372d9db749780f8779efef">GClasses::GHttpServer::m_buffers</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3a5cf31017d20c28905126c6e8379782"></a><!-- doxytag: member="GClasses::GHttpServer::m_modifiedTime" ref="a3a5cf31017d20c28905126c6e8379782" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t <a class="el" href="class_g_classes_1_1_g_http_server.html#a3a5cf31017d20c28905126c6e8379782">GClasses::GHttpServer::m_modifiedTime</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a88e4c216ea83851e4b4c5410b3416dd9"></a><!-- doxytag: member="GClasses::GHttpServer::m_pReceiveBuf" ref="a88e4c216ea83851e4b4c5410b3416dd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="class_g_classes_1_1_g_http_server.html#a88e4c216ea83851e4b4c5410b3416dd9">GClasses::GHttpServer::m_pReceiveBuf</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0a298e0db4ed2187de8aeea9a045c844"></a><!-- doxytag: member="GClasses::GHttpServer::m_pSocket" ref="a0a298e0db4ed2187de8aeea9a045c844" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GHttpServerSocket* <a class="el" href="class_g_classes_1_1_g_http_server.html#a0a298e0db4ed2187de8aeea9a045c844">GClasses::GHttpServer::m_pSocket</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="addf66e5e8bddcf3313182b0d688ceaa8"></a><!-- doxytag: member="GClasses::GHttpServer::m_stream" ref="addf66e5e8bddcf3313182b0d688ceaa8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostringstream <a class="el" href="class_g_classes_1_1_g_http_server.html#addf66e5e8bddcf3313182b0d688ceaa8">GClasses::GHttpServer::m_stream</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad4133caf5bf610b1eaa47a5e9c969e7e"></a><!-- doxytag: member="GClasses::GHttpServer::m_szContentType" ref="ad4133caf5bf610b1eaa47a5e9c969e7e" args="[64]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="class_g_classes_1_1_g_http_server.html#ad4133caf5bf610b1eaa47a5e9c969e7e">GClasses::GHttpServer::m_szContentType</a>[64]<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5b72c0105987b22167770e6442eb8fa3"></a><!-- doxytag: member="GClasses::GHttpServer::m_szCookie" ref="a5b72c0105987b22167770e6442eb8fa3" args="[MAX_COOKIE_SIZE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="class_g_classes_1_1_g_http_server.html#a5b72c0105987b22167770e6442eb8fa3">GClasses::GHttpServer::m_szCookie</a>[MAX_COOKIE_SIZE]<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_g_classes.html">GClasses</a>      </li>
      <li class="navelem"><a class="el" href="class_g_classes_1_1_g_http_server.html">GHttpServer</a>      </li>
      <li class="footer">Generated on Mon Dec 5 2011 14:19:00 for GClasses by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>

</body>
</html>
