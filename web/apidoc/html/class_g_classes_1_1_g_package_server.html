<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GClasses: GClasses::GPackageServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GClasses</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_g_classes_1_1_g_package_server.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>GClasses::GPackageServer Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="GClasses::GPackageServer" --><!-- doxytag: inherits="GClasses::GTCPServer" -->
<p>This class abstracts a server that speaks a home-made protocol that guarantees packages will arrive in the same order and size as when they were sent. This protocol is a simple layer on top of TCP.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;GSocket.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for GClasses::GPackageServer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_g_classes_1_1_g_package_server.png" usemap="#GClasses::GPackageServer_map" alt=""/>
  <map id="GClasses::GPackageServer_map" name="GClasses::GPackageServer_map">
<area href="class_g_classes_1_1_g_t_c_p_server.html" alt="GClasses::GTCPServer" shape="rect" coords="0,0,168,24"/>
</map>
 </div></div>

<p><a href="class_g_classes_1_1_g_package_server-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_package_server.html#a38d0cd01945503b0afbcef575c455117">GPackageServer</a> (unsigned short port)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_package_server.html#a84f96fd45630a8fd929753552bf1067b">~GPackageServer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_package_server.html#afb0d3f9957fa64444afb7d0d0033b9e7">send</a> (const char *buf, size_t len, <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *pConn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a package, which guarantees to arrive in the same order and size as it was sent.  <a href="#afb0d3f9957fa64444afb7d0d0033b9e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_package_server.html#aaf80c8a37b1acffeb498b6cdd1fa9551">receive</a> (size_t *pOutLen, <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> **pOutConn)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives the next available package. (The order and size is guaranteed to arrive the same as when it was sent.) NULL is returned if no package is ready in its entirety. The returned value is a pointer to an internal buffer, the contents of which is only valid until the next time receive is called.  <a href="#aaf80c8a37b1acffeb498b6cdd1fa9551"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_package_server.html#a22b0c276efcd4e829d2b72d66acb4351">setMaxBufferSizes</a> (size_t a, size_t b)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets some internal values that guide how it reallocates the internal buffer. 'a' is the maximum buffer size to keep around. 'b' is the maximum size for the buffer ever. If a package bigger than 'b' is sent, an exception will be thrown. If a package bigger than 'a' is sent, then the buffer will be grown to that size, but it will be made small again the next time a package is received.  <a href="#a22b0c276efcd4e829d2b72d66acb4351"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_package_server.html#afef35f9301d26be496f670b98df242ce">test</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs unit tests for this class. Throws an exception if there is a failure.  <a href="#afef35f9301d26be496f670b98df242ce"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_package_server.html#a4299ed0f847c561ad70181cff994a136">makeConnection</a> (SOCKET s)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">See the comment for GTCPConnection::makeConnection.  <a href="#a4299ed0f847c561ad70181cff994a136"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_package_server.html#a40cb7137e7470915e3e7e5419e109154">m_maxBufSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_classes_1_1_g_package_server.html#a5cc442da3fc6828d5db7bf47c31f41d1">m_maxPackageSize</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class abstracts a server that speaks a home-made protocol that guarantees packages will arrive in the same order and size as when they were sent. This protocol is a simple layer on top of TCP. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a38d0cd01945503b0afbcef575c455117"></a><!-- doxytag: member="GClasses::GPackageServer::GPackageServer" ref="a38d0cd01945503b0afbcef575c455117" args="(unsigned short port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GClasses::GPackageServer::GPackageServer </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a84f96fd45630a8fd929753552bf1067b"></a><!-- doxytag: member="GClasses::GPackageServer::~GPackageServer" ref="a84f96fd45630a8fd929753552bf1067b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual GClasses::GPackageServer::~GPackageServer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4299ed0f847c561ad70181cff994a136"></a><!-- doxytag: member="GClasses::GPackageServer::makeConnection" ref="a4299ed0f847c561ad70181cff994a136" args="(SOCKET s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a>* GClasses::GPackageServer::makeConnection </td>
          <td>(</td>
          <td class="paramtype">SOCKET&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>See the comment for GTCPConnection::makeConnection. </p>

<p>Reimplemented from <a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a1c6d88f34f86b916ff15e801012acfa4">GClasses::GTCPServer</a>.</p>

</div>
</div>
<a class="anchor" id="aaf80c8a37b1acffeb498b6cdd1fa9551"></a><!-- doxytag: member="GClasses::GPackageServer::receive" ref="aaf80c8a37b1acffeb498b6cdd1fa9551" args="(size_t *pOutLen, GTCPConnection **pOutConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* GClasses::GPackageServer::receive </td>
          <td>(</td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>pOutLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> **&#160;</td>
          <td class="paramname"><em>pOutConn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Receives the next available package. (The order and size is guaranteed to arrive the same as when it was sent.) NULL is returned if no package is ready in its entirety. The returned value is a pointer to an internal buffer, the contents of which is only valid until the next time receive is called. </p>

</div>
</div>
<a class="anchor" id="afb0d3f9957fa64444afb7d0d0033b9e7"></a><!-- doxytag: member="GClasses::GPackageServer::send" ref="afb0d3f9957fa64444afb7d0d0033b9e7" args="(const char *buf, size_t len, GTCPConnection *pConn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GPackageServer::send </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_g_classes_1_1_g_t_c_p_connection.html">GTCPConnection</a> *&#160;</td>
          <td class="paramname"><em>pConn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send a package, which guarantees to arrive in the same order and size as it was sent. </p>

<p>Reimplemented from <a class="el" href="class_g_classes_1_1_g_t_c_p_server.html#a7a192a4440a2d074bc2198ce82300d73">GClasses::GTCPServer</a>.</p>

</div>
</div>
<a class="anchor" id="a22b0c276efcd4e829d2b72d66acb4351"></a><!-- doxytag: member="GClasses::GPackageServer::setMaxBufferSizes" ref="a22b0c276efcd4e829d2b72d66acb4351" args="(size_t a, size_t b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GClasses::GPackageServer::setMaxBufferSizes </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets some internal values that guide how it reallocates the internal buffer. 'a' is the maximum buffer size to keep around. 'b' is the maximum size for the buffer ever. If a package bigger than 'b' is sent, an exception will be thrown. If a package bigger than 'a' is sent, then the buffer will be grown to that size, but it will be made small again the next time a package is received. </p>

</div>
</div>
<a class="anchor" id="afef35f9301d26be496f670b98df242ce"></a><!-- doxytag: member="GClasses::GPackageServer::test" ref="afef35f9301d26be496f670b98df242ce" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void GClasses::GPackageServer::test </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs unit tests for this class. Throws an exception if there is a failure. </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a40cb7137e7470915e3e7e5419e109154"></a><!-- doxytag: member="GClasses::GPackageServer::m_maxBufSize" ref="a40cb7137e7470915e3e7e5419e109154" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_g_classes_1_1_g_package_server.html#a40cb7137e7470915e3e7e5419e109154">GClasses::GPackageServer::m_maxBufSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5cc442da3fc6828d5db7bf47c31f41d1"></a><!-- doxytag: member="GClasses::GPackageServer::m_maxPackageSize" ref="a5cc442da3fc6828d5db7bf47c31f41d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="class_g_classes_1_1_g_package_server.html#a5cc442da3fc6828d5db7bf47c31f41d1">GClasses::GPackageServer::m_maxPackageSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_g_classes.html">GClasses</a>      </li>
      <li class="navelem"><a class="el" href="class_g_classes_1_1_g_package_server.html">GPackageServer</a>      </li>
      <li class="footer">Generated on Mon Dec 5 2011 14:19:03 for GClasses by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>

</body>
</html>
